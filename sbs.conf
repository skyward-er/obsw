# Skyward Build System Configuration File
#
# Copyright (c) 2015-2018 Skyward Experimental Rocketry
# Authors: Alain Carlucci, Alvise de' Faveri Tron
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.
#
# Here's a list of available BoardIds:
#lpc2138_miosix_board
#stm32f103ze_stm3210e-eval
#stm32f103ve_mp3v2
#stm32f100rb_stm32vldiscovery
#stm32f103ve_strive_mini
#stm32f103ze_redbull_v2
#stm32f407vg_stm32f4discovery
#stm32f207ig_stm3220g-eval
#stm32f207zg_ethboard_v2
#stm32f207ze_als_camboard
#stm32l151_als_mainboard
#stm32f407vg_bitsboard
#stm32f205rg_sony-newman
#stm32f429zi_stm32f4discovery
#stm32f103cb_als_mainboard_rev2
#stm32f100cb_tempsensor
#stm32f429zi_oledboard2
#efm32gg332f1024_wandstem
#stm32f411re_nucleo
#stm32f429zi_skyward_anakin
#stm32f100rc_solertegiard
#stm32f205rc_skyward_stormtrooper
#stm32f401vc_stm32f4discovery
#stm32f103c8_breakout
#stm32f100c8_microboard
#stm32f469ni_stm32f469i-disco
#stm32f429zi_skyward_homeone
#stm32f401re_nucleo
#stm32f103c8_skyward_aldeeran


# Syntax of this file:
# SBS_PROJECT: project settings
# srcfiles:    groups of sources to be compiled together
# boards:      main files, located in ENTRY_PATH
# tests:       test files, located in TESTS_PATH

#-----------------------------------#
#            SBS Project            #
#-----------------------------------#
# ENTRY_PATH:       entrypoints folder
# TESTS_PATH:       tests folder
# SRC_PATH:         shared sources folder
# SBS_BASE:         boardcore folder
# PROJECT_INCLUDES: folders to be included with -I

[SBS_PROJECT]
Type:             project
ENTRY_PATH:       src/entrypoints
TESTS_PATH:       src/tests
SRC_PATH:         src/
SBS_BASE:         skyward-boardcore
PROJECT_INCLUDES: skyward-boardcore

#-----------------------------------#
#          List of Sources          #
#-----------------------------------#
# [name]    -> can be included by boards and tests using '%name'
#     Type: srcfiles
#     Files: a '\n'-separated list of f

[nosecone]
Type:       srcfiles
Files:      src/boards/Nosecone/FSM/NoseconeManager.cpp
            src/boards/Nosecone/Motor/MotorDriver.cpp
            src/boards/Nosecone/Motor/CurrentSensor/MotorSensor.cpp
            src/boards/Nosecone/Canbus/CanImpl.cpp
            src/boards/Nosecone/LogProxy/LogProxy.cpp

[homeone]
Type:       srcfiles
Files:      src/boards/Homeone/IgnitionController/IgnitionController.cpp
            src/boards/Homeone/EventFunctions.cpp
            src/boards/Homeone/FlightModeManager/FlightModeManager.cpp
            src/boards/Homeone/SensorManager/SensorManager.cpp
            src/boards/Homeone/DeploymentController/Deployment.cpp
            src/boards/Homeone/TMTCManager/TMTCManager.cpp

[tmtc]
Type:       srcfiles
Files:      src/boards/Homeone/TMTCManager/TMTCManager.cpp

[logproxy]
Type:       srcfiles
Files:      src/boards/Homeone/LogProxy/LogProxy.cpp

[aldeeran]
Type:       srcfiles
FIles:      src/boards/Ignition/IgnitionManager.cpp 


#--------------------------#
#          Boards          #
#--------------------------#
# [boardname]  -> compile using '.sbs -b boardname'
#     BoardId: see the list at the top of this file
#     BinName: name of the final binary (without extension!)
#     Include: a space-separated list of files, %something will be substituted
#              with the corresponding 'srcfiles'
#     Main:    name of the main file (e.g. 'foo' -> src/entrypoints/foo.cpp)


[nosecone-board]
Type:       board
BoardId:    stm32f429zi_skyward_homeone
BinName:    nosecone-board
Include:    %nosecone %pwm %canbus %logger %events
Defines:   -DDEBUG
Main:       nosecone-board

[r2a-cutter]
Type:       board
BoardId:    stm32f429zi_skyward_homeone
BinName:    r2a-cutter
Include:    %pwm
Defines:    -DDEBUG
Main:       r2a-cutter


#--------------------------#
#          Tests           #
#--------------------------#
# [testname]   -> compile using 'sbs -b testname'
#     same as board
#     Main:    name of the main file (e.g. 'foo' -> src/tests/foo.cpp)


[test-sensormanager]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-sensormanager
Include:    %shared %homeone %logger
Defines:    -DDEBUG
Main:       Homeone/test-sensormanager

[test-fmm]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-fmm
Include:    %shared %homeone %logger
Defines:
Main:       Homeone/fsm/test-fmm

[test-homeone]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-homeone
Include:    %shared %homeone
Defines:
Main:       Homeone/test-homeone


[test-ignition-ctrl]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-ignition-ctrl
Include:    %shared %homeone %canbus %logger
Defines:
Main:       Homeone/fsm/test-ignition-ctrl

#[test-ignition-board]
#Type:       test
#BoardId:    stm32f103c8_skyward_alderaan
#BinName:    test-ignition-board
#Include:    %aldeeran 
#Defines:    -DDEBUG
#Main:       Alderaan/test-ignition-board

[test-deployment]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-deployment
Include:    %pwm %homeone %shared %logger
Defines:    -DDEBUG
Main:       Homeone/fsm/test-deployment

[test-imus]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-imus
Include:    %shared %homeone
Defines:
Main:       drivers/test-imus

[test-events]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-events
Include:    %shared
Defines:   -DDEBUG
Main:       Homeone/test-events

[test-cutter]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-cutter
Include:    %pwm
Defines:    -DDEBUG
Main:       drivers/test-cutter

[hbridge-test]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    hbridge-test
Include:	%shared
Defines:   -DDEBUG
Main:       drivers/hbridge-test

[test-tmtc]
Type:       test
BoardId:    stm32f429zi_skyward_homeone
BinName:    test-tmtc
Include:    %shared %tmtc %logproxy %logger %gamma868
Defines:   -DDEBUG
Main:       drivers/test-tmtc